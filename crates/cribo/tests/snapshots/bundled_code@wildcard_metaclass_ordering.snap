---
source: crates/cribo/tests/test_bundling_snapshots.rs
input_file: crates/cribo/tests/fixtures/wildcard_metaclass_ordering/main.py
---
#!/usr/bin/env python3
# Generated by Cribo - Python Source Bundler
# https://github.com/ophidiarium/cribo

import functools
import types
yaml_module = types.SimpleNamespace(__name__='yaml_module')
yaml_module_dumper = types.SimpleNamespace(__name__='yaml_module.dumper')
yaml_module.dumper = yaml_module_dumper
yaml_module_loader = types.SimpleNamespace(__name__='yaml_module.loader')
yaml_module.loader = yaml_module_loader
class BaseDumper:
    """Base dumper class"""

    def __init__(self):
        self.name = "BaseDumper"
class Dumper(BaseDumper):
    """Standard YAML dumper"""

    def __init__(self):
        super().__init__()
        self.name = "Dumper"
class BaseLoader:
    """Base loader class"""

    def __init__(self):
        self.name = "BaseLoader"
class Loader(BaseLoader):
    """Standard YAML loader"""

    def __init__(self):
        super().__init__()
        self.name = "Loader"
class FullLoader(BaseLoader):
    """Full featured YAML loader"""

    def __init__(self):
        super().__init__()
        self.name = "FullLoader"
class UnsafeLoader(BaseLoader):
    """Unsafe loader that can execute arbitrary Python"""

    def __init__(self):
        super().__init__()
        self.name = "UnsafeLoader"
BaseDumper.__module__ = 'yaml_module.dumper'
Dumper.__module__ = 'yaml_module.dumper'
BaseLoader.__module__ = 'yaml_module.loader'
Loader.__module__ = 'yaml_module.loader'
FullLoader.__module__ = 'yaml_module.loader'
UnsafeLoader.__module__ = 'yaml_module.loader'
@functools.cache
def __cribo_init___cribo_952a76_yaml_module():
    __cribo_module = types.SimpleNamespace()
    __cribo_module.__name__ = 'yaml_module'
    global BaseDumper, BaseLoader, Dumper, FullLoader, Loader, UnsafeLoader
    __cribo_module.BaseDumper = BaseDumper
    __cribo_module.BaseLoader = BaseLoader
    __cribo_module.Dumper = Dumper
    __cribo_module.FullLoader = FullLoader
    __cribo_module.Loader = Loader
    __cribo_module.UnsafeLoader = UnsafeLoader

    class YAMLObjectMetaclass(type):
        """The metaclass for YAMLObject."""

        def __init__(cls, name, bases, kwds):
            super().__init__(name, bases, kwds)
            if "yaml_tag" in kwds and kwds.get("yaml_tag") is not None:
                print(f"Metaclass: Registering {name} with tag {kwds['yaml_tag']}")
                if hasattr(cls, "yaml_loader"):
                    if isinstance(cls.yaml_loader, list):
                        for loader in cls.yaml_loader:
                            print(f"  - Would register with {loader.__name__}")
                    else:
                        print(f"  - Would register with {cls.yaml_loader.__name__}")
    YAMLObjectMetaclass.__module__ = 'yaml_module'
    __cribo_module.YAMLObjectMetaclass = YAMLObjectMetaclass

    class YAMLObject(metaclass=YAMLObjectMetaclass):
        """\n    An object that can be serialized to/from YAML.\n    Uses wildcard-imported symbols in class body.\n    """
        __slots__ = ()
        yaml_loader = [Loader, FullLoader, UnsafeLoader]
        yaml_dumper = Dumper
        yaml_tag = None
        yaml_flow_style = None

        def __repr__(self):
            return f"YAMLObject(loaders={len(self.yaml_loader)}, dumper={self.yaml_dumper.__name__})"

        @classmethod
        def from_yaml(cls, loader, node):
            return f"Loading {cls.__name__} from YAML"

        @classmethod
        def to_yaml(cls, dumper, data):
            return f"Dumping {cls.__name__} to YAML"
    YAMLObject.__module__ = 'yaml_module'
    __cribo_module.YAMLObject = YAMLObject
    __cribo_module.dumper = yaml_module_dumper
    __cribo_module.loader = yaml_module_loader
    return __cribo_module
"""\nTest fixture for wildcard imports with metaclass ordering.\n\nThis tests that when using wildcard imports, symbols from __all__\nare properly included even if not directly used in the class body.\n"""
yaml_module = __cribo_init___cribo_952a76_yaml_module()
assert hasattr(yaml_module, "YAMLObject")
assert hasattr(yaml_module, "YAMLObjectMetaclass")
print("Testing YAMLObject...")
obj = yaml_module.YAMLObject()
print(f"YAMLObject created: {obj}")
print(f"YAMLObject has metaclass: {type(yaml_module.YAMLObject).__name__}")
class CustomYAML(yaml_module.YAMLObject):
    yaml_tag = "!custom"
print("CustomYAML class created successfully")
print("All tests passed!")
