---
source: crates/cribo/tests/test_bundling_snapshots.rs
input_file: crates/cribo/tests/fixtures/pyfail_relative_import_cycles/main.py
---
#!/usr/bin/env python3
# Generated by Cribo - Python Source Bundler
# https://github.com/ophidiarium/cribo

from services import auth
if __name__ == "__main__":
    main()
def main():
    result = auth.authenticate_user("test_user")
    print(f"Relative import cycle result: {result}")
if __name__ == "__main__":
    main()
from .database import get_connection
def get_user_context():
    """Get user context - used by database module"""
    return "user_context_from_auth"
def authenticate_user(username):
    """Authenticate user using database connection"""
    conn = get_connection()
    return f"auth({username}, conn={conn})"
from .auth import get_user_context
def execute_query(query):
    """Execute a database query"""
    return f"query_result({query})"
def get_connection():
    """Get database connection with user context"""
    context = get_user_context()
    return f"db_connection(context={context})"
